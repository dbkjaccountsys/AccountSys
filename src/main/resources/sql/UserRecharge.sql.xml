<?xml version="1.0" encoding="UTF-8" ?>
<sql-statement namespace="com.dbkj.account.model.UserRecharge">

    <sql id="getPage">
        <![CDATA[
            SELECT t3.id,t3.userid,t1.username,t2.companyname,t3.time,t3.charge,t3.realcharge,t3.chargetype,t3.serialnum,t4.username AS chargeuser FROM `user` t1
            INNER JOIN user_info t2 ON t2.userid=t1.id
            INNER JOIN user_recharge t3 ON t1.id=t3.userid
            INNER JOIN admin t4 ON t3.chargeuser=t4.id
            INNER JOIN
            (
                SELECT id FROM user_recharge
                where 1=1
                 <#if startTime??>
                    and time>=?
                 </#if>
                 <#if endTime??>
                    and time<=?
                 </#if>
                 <#if userList??&&(userList?size>0)>
                    and userid in
                    (<#list userList as item>${item.userid}<#if item_index!=userList?size-1>,</#if></#list>)
                 </#if>
                 ORDER BY `time` DESC LIMIT ?,?
            ) t5 ON t3.id=t5.id
        ]]>
    </sql>
    <sql id="getCount">
        <![CDATA[
            select count(1) from user_recharge
            where 1=1
            <#if startTime??>
                 and time>=?
            </#if>
            <#if endTime??>
                 and time<=?
            </#if>
            <#if userList??&&(userList?size>0)>
                 and userid in
                 (<#list userList as item>${item.userid}<#if item_index!=userList?size-1>,</#if></#list>)
            </#if>
        ]]>
    </sql>
</sql-statement>